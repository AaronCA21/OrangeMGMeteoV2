<main class="container sticky-main">
    <div class="container-top">
        <div id="carouselCity" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="card-scroll-container" style="display: flex; overflow-x: hidden; width: 100%;">
                        <!-- Cards -->
                        <div class="card" style="width: 18rem; flex-shrink: 0;">
                            <div class="card" style="width: 18rem;">

                                <img src="ressources/img/jpg/Antalaha.jpg"
                                    class="bd-placeholder-img card-img-top" alt="Image Placeholder" width="100%"
                                    height="180">
                                <div class="card-body-V2">
                                    <p class="card-text">
                                    <div class="detail-city">Antalaha,</div>
                                    <div class="detail-weather">peu nuageux</div>
                                    <div class="detail-temp">NaN°C</div>
                                    </p>
                                </div>

                            </div>
                        </div>
                        <div class="card" style="width: 18rem; flex-shrink: 0;">
                            <!-- Card content -->
                            <div class="card" style="width: 18rem;">
                                <img src="ressources/img/jpg/Antananarivo.jpg"
                                    class="bd-placeholder-img card-img-top" alt="Image Placeholder" width="100%"
                                    height="180">
                                <div class="card-body-V2">
                                    <p class="card-text">
                                    <div class="detail-city">Antananarivo,</div>
                                    <div class="detail-weather">peu nuageux</div>
                                    <div class="detail-temp">NaN°C</div>
                                    </p>
                                </div>

                            </div>
                        </div>
                        <div class="card" style="width: 18rem; flex-shrink: 0;">
                            <!-- Card content -->
                            <div class="card" style="width: 18rem;">
                                <img src="ressources/img/jpg/Antsirabe.jpg"
                                    class="bd-placeholder-img card-img-top" alt="Image Placeholder" width="100%"
                                    height="180">
                                <div class="card-body-V2">
                                    <p class="card-text">
                                    <div class="detail-city">Antsirabe,</div>
                                    <div class="detail-weather">peu nuageux</div>
                                    <div class="detail-temp">NaN°C</div>
                                    </p>
                                </div>

                            </div>
                        </div>
                        <div class="card" style="width: 18rem; flex-shrink: 0;">
                            <!-- Card content -->
                            <div class="card" style="width: 18rem;">
                                <img src="ressources/img/jpg/Diego.jpg" class="bd-placeholder-img card-img-top"
                                    alt="Image Placeholder" width="100%" height="180">
                                <div class="card-body-V2">
                                    <p class="card-text">
                                    <div class="detail-city">Diego-Suarez,</div>
                                    <div class="detail-weather">peu nuageux</div>
                                    <div class="detail-temp">NaN°C</div>
                                    </p>
                                </div>

                            </div>
                        </div>
                        <!-- More cards here -->
                    </div>
                </div>
            </div>

            <!-- Buttons to scroll the cards -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselCity"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselCity"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <script>
            document.querySelector('.carousel-control-prev').addEventListener('click', function () {
                const container = document.querySelector('.card-scroll-container');
                const card = document.querySelector('.card');
                const cardWidth = card.offsetWidth; // Récupère la largeur d'une carte
                const margin = parseInt(window.getComputedStyle(card).marginRight, 10); // Récupère la marge droite de la carte
                const totalCardWidth = cardWidth + margin; // Calcul de la largeur totale d'une carte (largeur + marge)

                container.scrollLeft -= totalCardWidth; // Défile une carte vers la gauche, en tenant compte de la marge
            });

            document.querySelector('.carousel-control-next').addEventListener('click', function () {
                const container = document.querySelector('.card-scroll-container');
                const card = document.querySelector('.card');
                const cardWidth = card.offsetWidth; // Récupère la largeur d'une carte
                const margin = parseInt(window.getComputedStyle(card).marginRight, 10); // Récupère la marge droite de la carte
                const totalCardWidth = cardWidth + margin; // Calcul de la largeur totale d'une carte (largeur + marge)

                container.scrollLeft += totalCardWidth; // Défile une carte vers la droite, en tenant compte de la marge
            });



        </script>

        <!--JS sur l'API-->
        <script type="text/javascript" src="ressources/js/AaronCA21.js"></script>
    </div>

    <div class="container-base">
        <div class="container-left">
            <div class="container-haut">
                <div class="icon-container">
                    <!-- Icône -->
                    <img src="ressources/img/jpg/sun.png" alt="Icône météo" class="weather-iconV2">
                </div>
                <div class="details-container">
                    <!-- Détails superposés -->
                    <div class="detail-city">Antalaha</div>
                    <div class="detail-weather">Peu nuageux</div>
                    <div class="detail-temp">25°C</div>
                </div>
            </div>

            <div class="container-bas">
                <!-- Six superposed divs -->
                <div class="rowV2">
                    <div class="columnV2Icone">
                        <img src="ressources/img/jpg/weather-cloudy.png" alt="nuageux" class="weather-icon">
                    </div>
                    <div class="columnV2Jour">
                        <div class="dayV2">Mardi</div>
                        <div class="weatherV2">Peu nuageux</div>
                    </div>
                    <div class="columnV2Temp">
                        <p class="temp">20 - 30°C</p>
                    </div>
                </div>
                <div class="rowV2">
                    <div class="columnV2Icone">
                        <img src="ressources/img/jpg/weather-cloudy.png" alt="nuageux" class="weather-icon">
                    </div>
                    <div class="columnV2Jour">
                        <div class="dayV2">Mercredi</div>
                        <div class="weatherV2">Peu nuageux</div>
                    </div>
                    <div class="columnV2Temp">
                        <p class="temp">20 - 30°C</p>
                    </div>
                </div>
                <div class="rowV2">
                    <div class="columnV2Icone">
                        <img src="ressources/img/jpg/weather-partly-cloudy.png" alt="nuageux"
                            class="weather-icon">
                    </div>
                    <div class="columnV2Jour">
                        <div class="dayV2">Jeudi</div>
                        <div class="weatherV2">Peu nuageux</div>
                    </div>
                    <div class="columnV2Temp">
                        <p class="temp">20 - 30°C</p>
                    </div>
                </div>
                <div class="rowV2">
                    <div class="columnV2Icone">
                        <img src="ressources/img/jpg/weather-partly-cloudy.png" alt="nuageux"
                            class="weather-icon">
                    </div>
                    <div class="columnV2Jour">
                        <div class="dayV2">Vendredi</div>
                        <div class="weatherV2">Peu nuageux</div>
                    </div>
                    <div class="columnV2Temp">
                        <p class="temp">20 - 30°C</p>
                    </div>
                </div>
                <div class="rowV2">
                    <div class="columnV2Icone">
                        <img src="ressources/img/jpg/weather-cloudy.png" alt="nuageux" class="weather-icon">
                    </div>
                    <div class="columnV2Jour">
                        <div class="dayV2">Samedi</div>
                        <div class="weatherV2">Peu nuageux</div>
                    </div>
                    <div class="columnV2Temp">
                        <p class="temp">20 - 30°C</p>
                    </div>
                </div>
                <div class="rowV2">
                    <div class="columnV2Icone">
                        <img src="ressources/img/jpg/weather-thunder.png" alt="nuageux" class="weather-icon">
                    </div>
                    <div class="columnV2Jour">
                        <div class="dayV2">Dimanche</div>
                        <div class="weatherV2">Peu nuageux</div>
                    </div>
                    <div class="columnV2Temp">
                        <p class="temp">20 - 30°C</p>
                    </div>
                </div>
            </div>


        </div>

        <div class="container-right">
            <!-- Contenu du conteneur droit -->
            <div class="chartV2">
                <canvas id="myChart"></canvas>
            </div>

            <!-- Ajout de Chart.js via CDN -->
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



            <script>
                var ctx = document.getElementById('myChart').getContext('2d');

                var data = {
                    labels: ['12h', '15h', '18h', '21h', '00h'], // Heures spécifiques
                    datasets: [{
                        data: [22, 24, 21, 19, 17], // Données de température
                        borderColor: 'rgba(128, 0, 128, 1)',
                        backgroundColor: 'rgba(255, 255, 255)', // Couleur de remplissage sous la ligne
                        borderWidth: 2,
                        tension: 0.4 // Lisser les lignes du graphique
                    }]
                };

                // Ajout des icônes de météo (plugin personnalisé)
                var iconPlugin = {
                    id: 'customIconPlugin',
                    afterDraw: function (chart) {
                        var ctx = chart.ctx;
                        var xAxis = chart.scales.x;
                        var yAxisTop = chart.chartArea.top;

                        // Liste des icônes météo locales
                        var icons = [
                            'ressources/img/jpg/weather-cloudy.png', // Soleil
                            'ressources/img/jpg/weather-cloudy.png', // Nuageux
                            'ressources/img/jpg/weather-cloudy.png', // Pluie légère
                            'ressources/img/jpg/weather-cloudy.png', // Orage
                            'ressources/img/jpg/weather-cloudy.png'  // Nuit claire
                        ];

                        // Dessiner les icônes au-dessus de chaque point de l'axe X
                        icons.forEach((icon, index) => {
                            var img = new Image();
                            img.src = icon;
                            var xPos = xAxis.getPixelForValue(index);
                            var imgSize = 15; // Taille des icônes

                            img.onload = function () {
                                ctx.drawImage(img, xPos - imgSize / 2, yAxisTop - imgSize - 10, imgSize, imgSize);
                            };
                        });
                    }
                };

                // Options du graphique
                var options = {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false // Désactive la légende
                        },
                        title: {
                            display: false // Désactive tout titre par défaut
                        }
                    },
                    layout: {
                        backgroundColor: '#ffffff' // Définit le fond du graphique en blanc
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false // Pas de grille pour l'axe X
                            }
                        },
                        y: {
                            beginAtZero: true, // Axe Y commence à 0
                            title: {
                                display: true,
                                text: 'Température (°C)' // Titre de l'axe Y
                            }
                        }
                    }
                };

                // Création du graphique avec Chart.js
                var myChart = new Chart(ctx, {
                    type: 'line', // Type de graphique : "line"
                    data: data,
                    options: options,
                    plugins: [iconPlugin] // Ajout du plugin pour les icônes
                });
            </script>





            <div class="detailsV2">
                <div class="subDiv1">
                    <div class="innerDiv1">
                        <img src="ressources/img/jpg/water.png" class="icone-humidity">
                    </div>
                    <div class="innerDiv2">
                        <p>Humidité:</p>
                        <p class="humidity-data">5%</p>
                    </div>
                </div>
                <div class="subDiv2">
                    <div class="innerDiv3">
                        <img src="ressources/img/jpg/wind.png" class="icone-wind">
                    </div>
                    <div class="innerDiv4">
                        <p>Vitesse du vent:</p>
                        <p class="wind-data">5 m/s</p>
                    </div>
                </div>
            </div>



        </div>


    </div>

</main>